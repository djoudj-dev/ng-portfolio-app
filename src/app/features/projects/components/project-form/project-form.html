<section class="bg-background p-4 sm:p-6 rounded-lg shadow-md shadow-accent border border-primary-300">
  <h2 class="text-xl sm:text-2xl font-bold text-text mb-6">
    {{ isEditMode() ? 'Modifier le projet' : 'Ajouter un nouveau projet' }}
  </h2>

  <form [formGroup]="projectForm" (ngSubmit)="onSubmit()" class="space-y-6">
    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
      <!-- Title Field -->
      <div>
        <label for="title" class="block text-sm font-medium text-text/90 mb-2">Titre du projet</label>
        <input id="title" type="text" formControlName="title"
               class="w-full px-4 py-2 bg-background-200 border border-primary-300 rounded-lg text-text placeholder-text/50 focus:ring-2 focus:ring-accent focus:border-accent outline-none transition-all duration-200" />
      </div>

      <!-- Image Upload Field -->
      <div>
        <label for="image" class="block text-sm font-medium text-text/90 mb-2">
          Image du projet {{ !isEditMode() ? '(requis)' : '(optionnel)' }}
        </label>
        <input id="image" type="file" (change)="onFileSelected($event)" accept="image/*"
               class="w-full text-sm text-text file:mr-4 file:py-2 file:px-4 file:rounded-lg file:border-0 file:font-semibold file:bg-accent file:text-white hover:file:bg-accent/90" />
        @if (imagePreview()) {
          <div class="mt-4">
            <img [src]="imagePreview()!" alt="Aperçu de l'image" class="rounded-lg max-h-48 w-auto shadow-md"/>
          </div>
        }
      </div>
    </div>

    <!-- Description Field -->
    <div>
      <label for="description" class="block text-sm font-medium text-text/90 mb-2">Description</label>
      <textarea id="description" formControlName="description" rows="4"
                class="w-full px-4 py-2 bg-background-200 border border-primary-300 rounded-lg text-text placeholder-text/50 focus:ring-2 focus:ring-accent focus:border-accent outline-none transition-all duration-200"></textarea>
    </div>

    <!-- Technologies, Category, and Featured Fields -->
    <div class="grid grid-cols-1 md:grid-cols-3 gap-6 items-start">
      <div class="md:col-span-1">
        <label for="technologies" class="block text-sm font-medium text-text/90 mb-2">Technologies</label>
        <app-custom-multi-select formControlName="technologies" [options]="technologies"></app-custom-multi-select>
      </div>
      <div class="md:col-span-1">
        <label for="category" class="block text-sm font-medium text-text/90 mb-2">Catégorie</label>
        <select id="category" formControlName="category"
                class="w-full px-4 py-2 bg-background-200 border border-primary-300 rounded-lg text-text focus:ring-2 focus:ring-accent focus:border-accent outline-none transition-all duration-200">
          <option value="frontend">Frontend</option>
          <option value="backend">Backend</option>
          <option value="fullstack">Fullstack</option>
          <option value="script">Script</option>
        </select>
      </div>
      <div class="md:col-span-1 flex items-center justify-start pt-9">
        <label class="flex items-center cursor-pointer">
          <input type="checkbox" formControlName="featured" class="toggle toggle-accent" />
          <span class="ml-4 text-sm font-medium text-text/90">Mettre en avant</span>
        </label>
      </div>
    </div>

    <!-- GitHub URLs -->
    <div class="space-y-4 p-4 border border-primary-300/50 rounded-lg" formGroupName="github_urls">
      <h3 class="text-lg font-medium text-text">Liens GitHub</h3>
      <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
        <div>
          <label for="frontend" class="block text-sm font-medium text-text/90 mb-2">Frontend</label>
          <input id="frontend" type="text" formControlName="frontend"
                 class="w-full px-4 py-2 bg-background-200 border border-primary-300 rounded-lg text-text placeholder-text/50 focus:ring-2 focus:ring-accent focus:border-accent outline-none transition-all duration-200" />
        </div>
        <div>
          <label for="backend" class="block text-sm font-medium text-text/90 mb-2">Backend</label>
          <input id="backend" type="text" formControlName="backend"
                 class="w-full px-4 py-2 bg-background-200 border border-primary-300 rounded-lg text-text placeholder-text/50 focus:ring-2 focus:ring-accent focus:border-accent outline-none transition-all duration-200" />
        </div>
        <div>
          <label for="fullstack" class="block text-sm font-medium text-text/90 mb-2">Fullstack</label>
          <input id="fullstack" type="text" formControlName="fullstack"
                 class="w-full px-4 py-2 bg-background-200 border border-primary-300 rounded-lg text-text placeholder-text/50 focus:ring-2 focus:ring-accent focus:border-accent outline-none transition-all duration-200" />
        </div>
      </div>
    </div>

    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
      <!-- Demo URL -->
      <div>
        <label for="demo_url" class="block text-sm font-medium text-text/90 mb-2">URL de la démo</label>
        <input id="demo_url" type="text" formControlName="demo_url"
               class="w-full px-4 py-2 bg-background-200 border border-primary-300 rounded-lg text-text placeholder-text/50 focus:ring-2 focus:ring-accent focus:border-accent outline-none transition-all duration-200" />
      </div>
      <!-- Date -->
      <div>
        <label for="date" class="block text-sm font-medium text-text/90 mb-2">Date de réalisation</label>
        <input id="date" type="date" formControlName="date"
               class="w-full px-4 py-2 bg-background-200 border border-primary-300 rounded-lg text-text focus:ring-2 focus:ring-accent focus:border-accent outline-none transition-all duration-200" />
      </div>
    </div>


    <div class="mt-8 flex justify-end">
      <app-button
        type="submit"
        color="accent"
        [isLoading]="isLoading()"
[disabled]="!projectForm.valid || (!isEditMode() && !selectedFile)"
        customClass="px-8 py-3 hover:bg-primary/80"
      >
        Enregistrer le projet
      </app-button>
    </div>
  </form>
</section>
