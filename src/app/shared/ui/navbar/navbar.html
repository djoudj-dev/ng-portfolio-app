<nav
  class="fixed top-0 left-0 right-0 z-50 bg-background border-b border-accent backdrop-blur-sm"
  role="navigation"
  aria-label="Navigation principale"
>
  <div class="mx-auto px-3 sm:px-4 md:px-6 lg:max-w-7xl lg:px-8">
    <div class="flex items-center justify-between h-16">
      <div class="flex items-center space-x-2 sm:space-x-3" [routerLink]="['/']">
        <img
          [ngSrc]="'/logo.svg'"
          alt="Logo Julien.N"
          width="24"
          height="24"
          priority
          class="w-18 h-18"
        />
        <span class="text-2xl font-bold text-text tracking-tight">
          Julien<span class="text-accent bounce-dot">.</span>N
        </span>
      </div>

      <div class="hidden lg:flex items-center space-x-6 xl:space-x-8">
        @for (link of navLinks(); track link.route) {
          <a
            [routerLink]="link.route"
            class="flex items-center space-x-2 text-sm xl:text-base text-text hover:text-accent group relative hover:font-bold"
            [class.text-accent]="isActiveRoute(link.route)"
            [attr.aria-current]="isActiveRoute(link.route) ? 'page' : null"
          >
            <img
              [ngSrc]="'/icons/' + link.icon + '.svg'"
              [alt]="link.label + ' icon'"
              width="16"
              height="16"
              class="w-4 h-4 xl:w-5 xl:h-5 group-hover:scale-110 transition-transform duration-200"
              [class.icon-invert]="isDarkMode()"
            />
            <span class="nav-link-hover">{{ link.label }}</span>
          </a>
        }
      </div>

      <div class="flex items-center space-x-2 sm:space-x-3">
        <!-- CV View Button -->
        <app-button
          color="accent"
          [customClass]="'!w-auto !px-2 !py-1.5 sm:!px-3 sm:!py-2 !rounded-lg !text-xs sm:!text-sm !font-semibold hover:!scale-105 !shadow-md hover:!shadow-lg !transition-all !duration-300'"
          (buttonClick)="openCV()"
          aria-label="Voir mon CV"
        >
          <div class="flex items-center gap-1 sm:gap-2">
            <img
              [ngSrc]="'/icons/open.svg'"
              alt="CV"
              width="14"
              height="14"
              class="w-3.5 h-3.5 sm:w-4 sm:h-4 icon-invert brightness-0 invert"
            />
            <span class="hidden xs:inline sm:inline">Voir mon CV</span>
            <span class="xs:hidden sm:hidden">CV</span>
          </div>
        </app-button>

        <button
          (click)="toggleTheme()"
          class="p-1.5 sm:p-2 rounded-lg hover:bg-accent transition-colors duration-200"
          [attr.aria-label]="themeAriaLabel()"
        >
          <img
            [ngSrc]="themeIcon().src"
            [alt]="themeIcon().alt"
            width="18"
            height="18"
            class="w-4.5 h-4.5 sm:w-5 sm:h-5"
            [class.icon-invert]="isDarkMode()"
          />
        </button>

        @if (isAdmin()) {
          <button
            (click)="navigateToAdmin()"
            class="p-1.5 sm:p-2 rounded-lg hover:bg-accent transition-colors duration-200"
            aria-label="Accéder au panneau d'administration"
          >
            <img
              [ngSrc]="'/icons/admin.svg'"
              alt="Admin"
              width="18"
              height="18"
              class="w-4.5 h-4.5 sm:w-5 sm:h-5"
              [class.icon-invert]="isDarkMode()"
            />
          </button>
        }

        @if (isLoggedIn()) {
          <button
            (click)="logout()"
            class="p-1.5 sm:p-2 rounded-lg hover:bg-accent transition-colors duration-200"
            aria-label="Se déconnecter"
          >
            <img
              [ngSrc]="'/icons/logout.svg'"
              alt="Déconnexion"
              width="18"
              height="18"
              class="w-4.5 h-4.5 sm:w-5 sm:h-5"
              [class.icon-invert]="isDarkMode()"
            />
          </button>
        }

        <button
          (click)="toggleMobileMenu()"
          class="lg:hidden p-1.5 sm:p-2 rounded-lg hover:bg-accent transition-colors duration-200"
          [attr.aria-label]="menuAriaLabel()"
          [attr.aria-expanded]="isMobileMenuOpen()"
          aria-controls="mobile-menu"
        >
          <img
            [ngSrc]="menuIcon().src"
            [alt]="menuIcon().alt"
            width="20"
            height="20"
            class="w-5 h-5 sm:w-6 sm:h-6"
            [class.icon-invert]="isDarkMode()"
          />
        </button>
      </div>
    </div>

    @if (isMobileMenuOpen()) {
      <div id="mobile-menu" class="lg:hidden border-t border-accent-200 py-3 sm:py-4">
        <div class="flex flex-col space-y-2 sm:space-y-3">
          @for (link of navLinks(); track link.route) {
            <a
              [routerLink]="link.route"
              (click)="closeMobileMenu()"
              class="flex items-center space-x-3 text-base sm:text-lg text-text hover:text-accent transition-colors duration-200 px-3 sm:px-4 py-2.5 sm:py-3 rounded-lg hover:bg-accent active:bg-accent"
              [class.text-accent]="isActiveRoute(link.route)"
              [class.bg-accent]="isActiveRoute(link.route)"
              [attr.aria-current]="isActiveRoute(link.route) ? 'page' : null"
            >
              <img
                [ngSrc]="'/icons/' + link.icon + '.svg'"
                [alt]="link.label + ' icon'"
                width="20"
                height="20"
                class="w-5 h-5 sm:w-6 sm:h-6"
                [class.icon-invert]="isDarkMode()"
              />
              <span class="font-medium">{{ link.label }}</span>
            </a>
          }
        </div>
      </div>
    }
  </div>
</nav>
