<nav
  class="fixed top-0 left-0 right-0 z-50 bg-background border-b border-accent backdrop-blur-sm"
  role="navigation"
  aria-label="Navigation principale"
>
  <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
    <div class="flex items-center justify-between h-16">
      <!-- Logo Section (Left) -->
      <div class="flex items-center space-x-3">
        <img
          [ngSrc]="'/logo.svg'"
          alt="Logo Julien.N"
          width="32"
          height="32"
          priority
          class="w-18 h-18"
        />
        <span class="text-xl lg:text-2xl font-bold text-text tracking-tight">
          Julien<span class="text-accent bounce-dot">.</span>N
        </span>
      </div>

      <!-- Navigation Links (Center) - Hidden on mobile -->
      <div class="hidden md:flex items-center space-x-8">
        @for (link of navLinks(); track link.route) {
          <a
            [routerLink]="link.route"
            class="flex items-center space-x-2 text-text hover:text-accent group relative hover:font-bold"
            [class.text-accent]="isActiveRoute(link.route)"
            [attr.aria-current]="isActiveRoute(link.route) ? 'page' : null"
          >
            <img
              [ngSrc]="'/icons/navbar/' + link.icon + '.svg'"
              [alt]="link.label + ' icon'"
              width="16"
              height="16"
              class="w-6 h-6 group-hover:scale-110 transition-transform duration-200"
              [class.icon-invert]="isDarkMode()"
            />
            <span class="nav-link-hover">{{ link.label }}</span>
          </a>
        }
      </div>

      <!-- Action Icons (Right) -->
      <div class="flex items-center space-x-4">
        <!-- CV Download Button -->
        <app-button
          color="accent"
          [customClass]="'!w-auto !px-3 !py-2 !rounded-lg !text-xs !font-semibold hover:!scale-105 !shadow-md hover:!shadow-lg !transition-all !duration-300'"
          (buttonClick)="downloadCV()"
          aria-label="Télécharger mon CV"
        >
          <div class="flex items-center gap-2">
            <img
              [ngSrc]="'/icons/download.svg'"
              alt="CV"
              width="16"
              height="16"
              class="w-4 h-4 icon-invert brightness-0 invert"
            />
            <span>Mon CV</span>
          </div>
        </app-button>

        <!-- Theme Toggle -->
        <button
          (click)="toggleTheme()"
          class="p-2 rounded-lg hover:bg-accent transition-colors duration-200"
          [attr.aria-label]="themeAriaLabel()"
        >
          <img
            [ngSrc]="themeIcon().src"
            [alt]="themeIcon().alt"
            width="20"
            height="20"
            [class]="themeIcon().class"
          />
        </button>

        <!-- Admin Panel (Only for admin users) -->
        @if (isAdmin()) {
          <button
            (click)="navigateToAdmin()"
            class="p-2 rounded-lg hover:bg-accent transition-colors duration-200"
            aria-label="Accéder au panneau d'administration"
          >
            <img
              [ngSrc]="'/icons/navbar/admin.svg'"
              alt="Admin"
              width="20"
              height="20"
              [class]="isDarkMode() ? 'w-5 h-5 icon-invert' : 'w-5 h-5'"
            />
          </button>
        }

        <!-- Logout (Only when authenticated) -->
        @if (isLoggedIn()) {
          <button
            (click)="logout()"
            class="p-2 rounded-lg hover:bg-accent transition-colors duration-200"
            aria-label="Se déconnecter"
          >
            <img
              [ngSrc]="'/icons/navbar/logout.svg'"
              alt="Déconnexion"
              width="20"
              height="20"
              [class]="isDarkMode() ? 'w-5 h-5 icon-invert' : 'w-5 h-5'"
            />
          </button>
        }

        <!-- Mobile Menu Toggle -->
        <button
          (click)="toggleMobileMenu()"
          class="md:hidden p-2 rounded-lg hover:bg-accent-100 transition-colors duration-200"
          [attr.aria-label]="menuAriaLabel()"
          [attr.aria-expanded]="isMobileMenuOpen()"
          aria-controls="mobile-menu"
        >
          <img
            [ngSrc]="menuIcon().src"
            [alt]="menuIcon().alt"
            width="20"
            height="20"
            [class]="menuIcon().class"
          />
        </button>
      </div>
    </div>

    <!-- Mobile Menu (Hidden by default) -->
    @if (isMobileMenuOpen()) {
      <div id="mobile-menu" class="md:hidden border-t border-primary-200 py-4">
        <div class="flex flex-col space-y-4">
          @for (link of navLinks(); track link.route) {
            <a
              [routerLink]="link.route"
              (click)="closeMobileMenu()"
              class="flex items-center space-x-3 text-text hover:text-accent transition-colors duration-200 px-4 py-2 rounded-lg hover:bg-accent"
              [class.text-accent]="isActiveRoute(link.route)"
              [attr.aria-current]="isActiveRoute(link.route) ? 'page' : null"
            >
              <img
                [ngSrc]="'/icons/navbar/' + link.icon + '.svg'"
                [alt]="link.label + ' icon'"
                width="16"
                height="16"
                class="w-6 h-6"
                [class.icon-invert]="isDarkMode()"
              />
              <span class="font-medium">{{ link.label }}</span>
            </a>
          }
        </div>
      </div>
    }
  </div>
</nav>
